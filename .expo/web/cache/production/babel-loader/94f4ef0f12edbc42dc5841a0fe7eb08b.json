{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React from'react';import Button from'@material-ui/core/Button';import Paper from'@material-ui/core/Paper';import CssBaseline from'@material-ui/core/CssBaseline';import TextField from'@material-ui/core/TextField';import FormControl from'@material-ui/core/FormControl';import{Menu,MenuItem}from'@material-ui/core';import Link from'@material-ui/core/Link';import Grid from'@material-ui/core/Grid';import Typography from'@material-ui/core/Typography';import{makeStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import{useState,useEffect}from'react';import Card from'@material-ui/core/Card';import{navigate}from'gatsby';import Select from'@material-ui/core/Select';var useStyles=makeStyles(function(theme){return{'@global':{'*::-webkit-scrollbar':{display:'none'},'*::-webkit-scrollbar-track':{'-webkit-box-shadow':'inset 0 0 6px rgba(0,0,0,0.00)'},'*::-webkit-scrollbar-thumb':{backgroundColor:'rgba(255, 153, 153, .5)',outline:'1px solid slategrey'},'*::-webkit-overflow-scrolling':'touch','body':{margin:'0',padding:'0 0 0 0',backgroundColor:'#E5F8FF'}},root:{justify:'center',width:'100%',height:'100%',margin:'auto',display:'flex',backgroundColor:'#E5F8FF',flexGrow:'1'},paper:{padding:'5px 15px 0 15px',margin:'auto',width:'85vw',height:'100vh',backgroundColor:'rgba(255,255,255, .8)',overflowY:'scroll',overflowX:'hidden'},img:{margin:'auto',display:'block',height:'60vh',width:'90vw',objectFit:'cover',objectPosition:'0% 0%'},cell:{},formControl:{minWidth:150,margin:theme.spacing(1)}};});var Profile=function Profile(_ref){var location=_ref.location;var userName=typeof window!=='undefined'?location.state.username:\"\";var _useState=useState({name:'',age:0,image_path:'',msg:''}),_useState2=_slicedToArray(_useState,2),info=_useState2[0],setInfo=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),matching=_useState4[0],setMatching=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),msg=_useState6[0],setMsg=_useState6[1];var _useState7=useState('https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Chang_Chia-Hang_giving_V-sign_20190414.jpg/1200px-Chang_Chia-Hang_giving_V-sign_20190414.jpg'),_useState8=_slicedToArray(_useState7,2),img=_useState8[0],setImg=_useState8[1];var classes=useStyles();useEffect(function(){if(typeof window!=='undefined'){fetch('https://matchsitebackend.herokuapp.com/profile/get',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({\"account\":userName})}).then(function(res){return res.json();}).then(function(data){if(data.success){console.log('got info');console.log(data.data[0]);setInfo(data.data[0]);setMatching(Number(data.data[0].matchingLoc));setMsg(data.data[0].msg);}else{navigate('/login');}});}},[]);function update(){if(typeof window!=='undefined'){fetch('https://matchsitebackend.herokuapp.com/profile/update',{method:'PUT',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({\"account\":userName,\"matchingLoc\":matching,\"msg\":msg})}).then(function(res){return res.json();}).then(function(data){if(data.success){console.log('updated');}else{console.log('update failed');}});}}return React.createElement(\"div\",null,React.createElement(\"head\",null,React.createElement(\"meta\",{name:\"viewport\",content:\"minimum-scale=1, initial-scale=1, width=device-width\"})),React.createElement(Card,{className:classes.paper},React.createElement(Grid,{container:true,direction:'column',spacing:3,justify:\"center\"},React.createElement(Grid,{item:true,xs:12,className:classes.cell},React.createElement(\"img\",{className:classes.img,src:'https://matchsiteimg.s3.ap-northeast-2.amazonaws.com/'+info.image_path})),React.createElement(Grid,{item:true,xs:12},React.createElement(Typography,{variant:\"h4\"},info.name,\", \",info.age)),React.createElement(Grid,{item:true,xs:12},React.createElement(TextField,{label:\"about me\",multiline:true,rowsMax:12,variant:\"outlined\",value:msg,InputLabelProps:{shrink:true},onChange:function onChange(e){return setMsg(e.target.value);}}),React.createElement(FormControl,{className:classes.formControl,color:\"secondary\"},React.createElement(TextField,{select:true,label:\"matching Location\",id:\"matching Loc\",value:matching,onChange:function onChange(e){return setMatching(Number(e.target.value));}},React.createElement(MenuItem,{value:1},\"Taipei City\"),React.createElement(MenuItem,{value:2},\"Others\")))),React.createElement(Grid,{container:true},React.createElement(Button,{onClick:function onClick(){return update();}},\" Update \"),React.createElement(Button,{onClick:function onClick(e){return navigate('/Main',{state:{username:userName}});}},\" MainPage \")))));};export default Profile;","map":{"version":3,"sources":["D:/MatchSite/src/pages/ProfilePage/profile.js"],"names":["React","Button","Paper","CssBaseline","TextField","FormControl","Menu","MenuItem","Link","Grid","Typography","makeStyles","Container","useState","useEffect","Card","navigate","Select","useStyles","theme","display","backgroundColor","outline","margin","padding","root","justify","width","height","flexGrow","paper","overflowY","overflowX","img","objectFit","objectPosition","cell","formControl","minWidth","spacing","Profile","location","userName","window","state","username","name","age","image_path","msg","info","setInfo","matching","setMatching","setMsg","setImg","classes","fetch","method","headers","body","JSON","stringify","then","res","json","data","success","console","log","Number","matchingLoc","update","shrink","e","target","value"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper'\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { Menu, MenuItem } from '@material-ui/core';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport { useState, useEffect } from 'react';\r\nimport Card from '@material-ui/core/Card'\r\nimport { navigate } from 'gatsby'\r\nimport Select from '@material-ui/core/Select';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    '@global': {\r\n        '*::-webkit-scrollbar': {\r\n          display: 'none'\r\n        },\r\n        '*::-webkit-scrollbar-track': {\r\n          '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.00)'\r\n        },\r\n        '*::-webkit-scrollbar-thumb': {\r\n          backgroundColor: 'rgba(255, 153, 153, .5)',\r\n          outline: '1px solid slategrey'\r\n        },\r\n        '*::-webkit-overflow-scrolling': 'touch',\r\n        'body': {\r\n            margin: '0',\r\n            padding: '0 0 0 0',\r\n            backgroundColor: '#E5F8FF',\r\n        },\r\n      },\r\n    root: {\r\n        justify: 'center',\r\n        width: '100%',\r\n        height: '100%',\r\n        margin: 'auto',\r\n        display: 'flex',\r\n        backgroundColor: '#E5F8FF',\r\n        flexGrow: '1',\r\n    },\r\n    \r\n    paper: {\r\n        padding: '5px 15px 0 15px',\r\n        margin: 'auto',\r\n        width: '85vw',\r\n        height: '100vh',\r\n        backgroundColor: 'rgba(255,255,255, .8)',\r\n        overflowY: 'scroll',\r\n        overflowX: 'hidden',\r\n    },\r\n\r\n    img: {\r\n        margin: 'auto',\r\n        display: 'block',\r\n        height: '60vh',\r\n        width: '90vw',\r\n        objectFit: 'cover',\r\n        objectPosition: '0% 0%'\r\n    },\r\n\r\n    cell: {\r\n    },\r\n\r\n    formControl: {\r\n        minWidth: 150,\r\n        margin: theme.spacing(1)\r\n      },\r\n}));\r\n\r\n\r\nconst Profile = ({location}) => {\r\n    const userName = (typeof window !== 'undefined') ? location.state.username : \"\";\r\n    const [info, setInfo] = useState({name: '', age: 0, image_path: '', msg: ''});\r\n    const [matching, setMatching] = useState(1);\r\n    const [msg, setMsg] = useState();\r\n    const [img, setImg] = useState('https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Chang_Chia-Hang_giving_V-sign_20190414.jpg/1200px-Chang_Chia-Hang_giving_V-sign_20190414.jpg');\r\n    const classes = useStyles();\r\n    useEffect(() => {\r\n        if (typeof window !== 'undefined') {\r\n            fetch('https://matchsitebackend.herokuapp.com/profile/get', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    \"account\": userName,\r\n                })\r\n                })\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    if (data.success) {\r\n                    console.log('got info');\r\n                    console.log(data.data[0]);\r\n                    setInfo(data.data[0]);\r\n                    setMatching(Number(data.data[0].matchingLoc));\r\n                    setMsg(data.data[0].msg);\r\n                    } else {\r\n                        navigate('/login');\r\n                    }\r\n                    })\r\n            }}, []);\r\n    \r\n    function update() {\r\n        if (typeof window !== 'undefined') {\r\n            fetch('https://matchsitebackend.herokuapp.com/profile/update', {\r\n                method: 'PUT',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    \"account\": userName,\r\n                    \"matchingLoc\": matching,\r\n                    \"msg\": msg,\r\n                })\r\n                })\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    if (data.success) {\r\n                        console.log('updated');\r\n                    } else {\r\n                        console.log('update failed');\r\n                    }\r\n                    })\r\n            }\r\n    }\r\n    return (\r\n        <div>\r\n            <head>\r\n                <meta\r\n                name=\"viewport\"\r\n                content=\"minimum-scale=1, initial-scale=1, width=device-width\"\r\n                />\r\n            </head>\r\n            <Card className={classes.paper}>\r\n                <Grid container direction={'column'} spacing={3} justify=\"center\">\r\n                    <Grid item xs={12} className={classes.cell}>  \r\n                        <img className={classes.img} src={'https://matchsiteimg.s3.ap-northeast-2.amazonaws.com/'+info.image_path} />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Typography variant='h4'>\r\n                            {info.name}, {info.age}\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <TextField\r\n                            label= \"about me\"\r\n                            multiline\r\n                            rowsMax={12}\r\n                            variant=\"outlined\"\r\n                            value={msg}\r\n                            InputLabelProps={{shrink: true}}\r\n                            onChange={(e) => setMsg(e.target.value)}\r\n                        />\r\n                        <FormControl className={classes.formControl} color='secondary'>\r\n                            <TextField\r\n                                select\r\n                                label=\"matching Location\"\r\n                                id=\"matching Loc\"\r\n                                value={matching}\r\n                                onChange={(e) => setMatching(Number(e.target.value))}\r\n                            >\r\n\r\n                                <MenuItem value={1}>Taipei City</MenuItem>\r\n                                <MenuItem value={2}>Others</MenuItem>\r\n                            </TextField>\r\n                        </FormControl>\r\n                    </Grid>\r\n                    <Grid container>\r\n                    <Button onClick={() => update()}> Update </Button>\r\n                    <Button onClick={(e) => navigate('/Main', {\r\n                                  state: {username: userName,},\r\n                                })}> MainPage </Button>\r\n                    </Grid>\r\n                </Grid>\r\n                \r\n            </Card>\r\n        </div>\r\n\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}