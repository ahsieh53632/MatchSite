{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React from'react';import Avatar from'@material-ui/core/Avatar';import Button from'@material-ui/core/Button';import CssBaseline from'@material-ui/core/CssBaseline';import TextField from'@material-ui/core/TextField';import Checkbox from'@material-ui/core/Checkbox';import Grid from'@material-ui/core/Grid';import Box from'@material-ui/core/Box';import Typography from'@material-ui/core/Typography';import{withStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import{Slide,AppBar}from'@material-ui/core';import Card from'@material-ui/core/Card';import{navigate}from'gatsby';import SideBarHeader from'./sideBarHeader';import SideBar from'./sideBar';import CardStack from'../cardStack';import{Router}from'react-router-dom';import Fade from'@material-ui/core/Fade';import Menu from'@material-ui/core/Menu';import MenuItem from'@material-ui/core/MenuItem';var styles=function styles(theme){return{'@global':{'body':{margin:'0',padding:'0 0 0 0',overflow:'hidden'}},container:{width:'100%',height:'100%',margin:\"0\",padding:'0 0 0 0',overflow:'hidden'},root:{flexGrow:'1'},sideBar:{width:'fit-content'}};};var MainPage=function(_React$Component){_inherits(MainPage,_React$Component);var _super=_createSuper(MainPage);function MainPage(props){var _this;_classCallCheck(this,MainPage);_this=_super.call(this,props);_this.state={typeEl:null,dateEl:null,matchDate:null,startTime:'1999-01-01',endTime:'9999-12-30',type:'*',imgPath:'',loc:1};_this.matches=[];return _this;}_createClass(MainPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var _this$props=this.props,classes=_this$props.classes,userName=_this$props.userName,rest=_objectWithoutProperties(_this$props,[\"classes\",\"userName\"]);fetch('https://matchsitebackend.herokuapp.com/profile/get',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({\"account\":userName})}).then(function(res){return res.json();}).then(function(data){if(data.success){console.log('fetching matching time period');_this2.setState(_objectSpread(_objectSpread({},_this2.state),{},{startTime:data.data[0].startTime.toString().slice(0,10),endTime:data.data[0].endTime.toString().slice(0,10),loc:data.data[0].matchingLoc}));}});}},{key:\"handleTypeClick\",value:function handleTypeClick(e){var x=e.currentTarget;this.setState({typeEl:x,dateEl:null});}},{key:\"handleDateClick\",value:function handleDateClick(e){var x=e.currentTarget;this.setState({typeEl:null,dateEl:x});}},{key:\"handleClose\",value:function handleClose(){this.setState({typeEl:null,dateEl:null});}},{key:\"handleChangeDate\",value:function handleChangeDate(date){var startDate=new Date();var newDate=new Date();if(date===\"today\"){newDate=startDate;}else if(date===\"tmr\"){newDate=new Date(startDate.getTime()+1*86400000);}else if(date===\"thisWeek\"){newDate=new Date(startDate.getTime()+7*86400000);}else{newDate=new Date(startDate.getTime()+14*86400000);startDate=new Date(startDate.getTime()+7*86400000);}var start=startDate.getFullYear()+'-'+(startDate.getMonth()+1)+'-'+startDate.getDate();var end=newDate.getFullYear()+'-'+(newDate.getMonth()+1)+'-'+newDate.getDate();this.setState(_objectSpread(_objectSpread({},this.state),{},{startTime:start,endTime:end,dateEl:null}));}},{key:\"handleChangeType\",value:function handleChangeType(type){this.setState(_objectSpread(_objectSpread({},this.state),{},{type:type,typeEl:null}));}},{key:\"render\",value:function render(){var _this3=this;var _this$props2=this.props,classes=_this$props2.classes,userName=_this$props2.userName,rest=_objectWithoutProperties(_this$props2,[\"classes\",\"userName\"]);return React.createElement(\"div\",null,React.createElement(\"header\",null,React.createElement(\"meta\",{name:\"viewport\",content:\"minimum-scale=1, initial-scale=1, width=device-width\"})),React.createElement(SideBarHeader,{userName:userName}),React.createElement(\"div\",{className:classes.container},React.createElement(Grid,{container:true,direction:'row',alignItems:\"flex-start\",spacing:0,className:classes.root},React.createElement(Grid,{item:true,xs:6,sm:3},React.createElement(Button,{\"aria-controls\":\"fade-menu\",\"aria-haspopup\":\"true\",onClick:function onClick(e){return _this3.handleTypeClick(e);}},\"Choose Type\"),React.createElement(Menu,{id:\"fade-menu\",anchorEl:this.state.typeEl,keepMounted:true,open:Boolean(this.state.typeEl),onClose:function onClose(){_this3.handleClose();},TransitionComponent:Fade},React.createElement(MenuItem,{onClick:function onClick(){return _this3.handleChangeType(\"machong\");}},\"\\u6253\\u9EBB\\u5C07\"),React.createElement(MenuItem,{onClick:function onClick(){return _this3.handleChangeType(\"movie\");}},\"\\u770B\\u96FB\\u5F71\"),React.createElement(MenuItem,{onClick:function onClick(){return _this3.handleChangeType(\"eat\");}},\"\\u5403\\u98EF\"),React.createElement(MenuItem,{onClick:function onClick(){return _this3.handleChangeType(\"*\");}},\"ALL\"))),React.createElement(Grid,{item:true,xs:6,sm:3},React.createElement(Button,{\"aria-controls\":\"date-menu\",\"aria-haspopup\":\"true\",onClick:function onClick(e){return _this3.handleDateClick(e);}},\"Choose Date\"),React.createElement(Menu,{id:\"date-menu\",anchorEl:this.state.dateEl,keepMounted:true,open:Boolean(this.state.dateEl),onClose:function onClose(){_this3.handleClose();},TransitionComponent:Fade},React.createElement(MenuItem,{onClick:function onClick(){return _this3.handleChangeDate(\"today\");}},\"\\u4ECA\\u5929\"),React.createElement(MenuItem,{onClick:function onClick(){return _this3.handleChangeDate(\"tmr\");}},\"\\u660E\\u5929\"),React.createElement(MenuItem,{onClick:function onClick(){return _this3.handleChangeDate(\"thisWeek\");}},\"\\u9019\\u79AE\\u62DC\"),React.createElement(MenuItem,{onClick:function onClick(){return _this3.handleChangeDate(\"nextWeek\");}},\"\\u4E0B\\u79AE\\u62DC\"))),React.createElement(Grid,{item:true,xs:12},React.createElement(CardStack,{type:this.state.type,startTime:this.state.startTime,endTime:this.state.endTime,userName:userName,loc:this.state.loc})))));}}]);return MainPage;}(React.Component);export default withStyles(styles)(MainPage);","map":{"version":3,"sources":["D:/MatchSite/src/pages/MainPage/mainPage.jsx"],"names":["React","Avatar","Button","CssBaseline","TextField","Checkbox","Grid","Box","Typography","withStyles","Container","Slide","AppBar","Card","navigate","SideBarHeader","SideBar","CardStack","Router","Fade","Menu","MenuItem","styles","theme","margin","padding","overflow","container","width","height","root","flexGrow","sideBar","MainPage","props","state","typeEl","dateEl","matchDate","startTime","endTime","type","imgPath","loc","matches","classes","userName","rest","fetch","method","headers","body","JSON","stringify","then","res","json","data","success","console","log","setState","toString","slice","matchingLoc","e","x","currentTarget","date","startDate","Date","newDate","getTime","start","getFullYear","getMonth","getDate","end","handleTypeClick","Boolean","handleClose","handleChangeType","handleDateClick","handleChangeDate","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport { Slide, AppBar } from '@material-ui/core';\r\nimport Card from '@material-ui/core/Card';\r\nimport { navigate } from 'gatsby';\r\nimport SideBarHeader from './sideBarHeader'\r\nimport SideBar from './sideBar'\r\nimport CardStack from '../cardStack'\r\nimport { Router } from 'react-router-dom';\r\nimport Fade from '@material-ui/core/Fade';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nconst styles = theme => ({\r\n    '@global': {\r\n        'body': {\r\n          margin: '0',\r\n          padding: '0 0 0 0',\r\n          overflow: 'hidden',\r\n        },\r\n        \r\n      },\r\n    container: {\r\n        width: '100%',\r\n        height: '100%',\r\n        margin: `0`,\r\n        padding: '0 0 0 0',\r\n        overflow: 'hidden',\r\n    },\r\n    root: {\r\n        flexGrow: '1',\r\n    },\r\n    sideBar: {\r\n        width: 'fit-content',\r\n\r\n    }\r\n})\r\nclass MainPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            typeEl: null,\r\n            dateEl: null,\r\n            matchDate: null,\r\n            startTime: '1999-01-01',\r\n            endTime: '9999-12-30',\r\n            type: '*',\r\n            imgPath: '',\r\n            loc: 1,\r\n        };\r\n        this.matches = [];\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {classes, userName, ...rest} = this.props\r\n        fetch('https://matchsitebackend.herokuapp.com/profile/get', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    \"account\": userName,\r\n                })\r\n                })\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    if (data.success) {\r\n                    console.log('fetching matching time period');\r\n                    this.setState({...this.state, \r\n                        startTime: data.data[0].startTime.toString().slice(0,10),\r\n                        endTime: data.data[0].endTime.toString().slice(0,10),\r\n                        loc: data.data[0].matchingLoc});\r\n                    }\r\n                    })\r\n    }\r\n\r\n\r\n    handleTypeClick(e) {\r\n        var x = e.currentTarget;\r\n        this.setState({typeEl: x, dateEl: null});\r\n    }\r\n\r\n    handleDateClick(e) {\r\n        var x = e.currentTarget;\r\n        this.setState({typeEl: null, dateEl: x});\r\n    }\r\n\r\n    handleClose() {\r\n        this.setState({typeEl: null, dateEl: null});\r\n    }\r\n\r\n    handleChangeDate(date) {\r\n        var startDate = new Date();\r\n        var newDate = new Date();\r\n        if (date === \"today\") {\r\n            newDate = startDate;\r\n        } else if (date === \"tmr\") {\r\n            newDate = new Date(startDate.getTime() + 1 * 86400000 );\r\n        } else if (date === \"thisWeek\") {\r\n            newDate = new Date(startDate.getTime() + 7 * 86400000 );\r\n        } else {\r\n            // next week\r\n            newDate = new Date(startDate.getTime() + 14 * 86400000 );\r\n            startDate = new Date(startDate.getTime() + 7 * 86400000 );\r\n        }\r\n        const start = startDate.getFullYear() +'-'+ (startDate.getMonth() + 1) +'-'+ startDate.getDate();\r\n        const end = newDate.getFullYear() +'-'+ (newDate.getMonth() + 1) +'-'+ newDate.getDate();\r\n        this.setState({...this.state, startTime: start,\r\n             endTime: end, dateEl: null});\r\n    }\r\n\r\n    handleChangeType(type) {\r\n        this.setState({...this.state, type: type, typeEl: null});\r\n    }\r\n\r\n    render() {\r\n        const {classes, userName, ...rest} = this.props\r\n        return (\r\n            <div>\r\n                <header>\r\n                <meta\r\n                name=\"viewport\"\r\n                content=\"minimum-scale=1, initial-scale=1, width=device-width\"\r\n                />\r\n                </header>\r\n            <SideBarHeader userName={userName}/>\r\n            <div className={classes.container}>    \r\n            <Grid container direction={'row'} alignItems=\"flex-start\" spacing={0} className={classes.root}>\r\n                <Grid item xs={6} sm={3}>\r\n                    <Button aria-controls=\"fade-menu\" aria-haspopup=\"true\" onClick={(e) => this.handleTypeClick(e)}>\r\n                        Choose Type\r\n                    </Button>\r\n                    <Menu \r\n                        id=\"fade-menu\"\r\n                        anchorEl={this.state.typeEl}\r\n                        keepMounted\r\n                        open={Boolean(this.state.typeEl)}\r\n                        onClose={() => {this.handleClose()}}\r\n                        TransitionComponent={Fade}\r\n                    >\r\n                        <MenuItem onClick={() => this.handleChangeType(\"machong\")}>打麻將</MenuItem>\r\n                        <MenuItem onClick={() => this.handleChangeType(\"movie\")}>看電影</MenuItem>\r\n                        <MenuItem onClick={() => this.handleChangeType(\"eat\")}>吃飯</MenuItem>\r\n                        <MenuItem onClick={() => this.handleChangeType(\"*\")}>ALL</MenuItem>\r\n                    </Menu>\r\n                </Grid>\r\n                <Grid item xs={6} sm={3}>\r\n                    <Button aria-controls=\"date-menu\" aria-haspopup=\"true\" onClick={(e) => this.handleDateClick(e)}>\r\n                        Choose Date\r\n                    </Button>\r\n                    <Menu \r\n                        id=\"date-menu\"\r\n                        anchorEl={this.state.dateEl}\r\n                        keepMounted\r\n                        open={Boolean(this.state.dateEl)}\r\n                        onClose={() => {this.handleClose()}}\r\n                        TransitionComponent={Fade}\r\n                    >\r\n                        <MenuItem onClick={() => this.handleChangeDate(\"today\")}>今天</MenuItem>\r\n                        <MenuItem onClick={() => this.handleChangeDate(\"tmr\")}>明天</MenuItem>\r\n                        <MenuItem onClick={() => this.handleChangeDate(\"thisWeek\")}>這禮拜</MenuItem>\r\n                        <MenuItem onClick={() => this.handleChangeDate(\"nextWeek\")}>下禮拜</MenuItem>\r\n                    </Menu>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <CardStack type={this.state.type} \r\n                        startTime={this.state.startTime}\r\n                        endTime={this.state.endTime}\r\n                        userName= {userName}\r\n                        loc={this.state.loc}/>\r\n                </Grid>\r\n                \r\n            </Grid>\r\n            </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withStyles(styles)(MainPage);"]},"metadata":{},"sourceType":"module"}