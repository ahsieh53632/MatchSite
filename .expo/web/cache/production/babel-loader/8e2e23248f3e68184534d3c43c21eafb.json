{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import{render}from'react-dom';import React,{useEffect,useState}from'react';import{useSprings,animated,interpolate}from'react-spring';import{useGesture,useDrag}from'react-use-gesture';import{makeStyles}from'@material-ui/styles';import{Grid,Typography}from'@material-ui/core';var useStyles=makeStyles(function(theme){return{'@global':{'body':{background:'#E5F8FF',overflow:'hidden'}},root:{boxSizing:'border-box',position:'fixed',width:'100%',height:'100%'},div:{boxSizing:'border-box',position:'absolute',width:'100%',height:'75vh',willChange:'transform',display:'flex',alignItems:'center',justifyContent:'center'},innerDiv:{zIndex:'1',boxSizing:'border-box',backgroundColor:'white',backgroundSize:'auto 100%',backgroundRepeat:'no-repeat',backgroundPosition:'center center',width:'35vh',maxWidth:'280px',height:'80vh',maxHeight:'500px',willChange:'transform',borderRadius:'30px',boxShadow:'0 12.5px 100px -10px rgba(90, 90, 90, 0.4), 0 10px 10px -10px rgba(90, 90, 90, 0.3)',color:\"white\",display:'flex',backgroundSize:'35vh 75vh'},text:{width:'60vw',textShadow:'2px 2px rgba(0, 0, 0, 1)'},boldText:{textShadow:'2px 2px rgba(0, 0, 0, 1)',fontSize:'20px'},container:{position:'relative',padding:'0 0px 15px 10px',bottom:'0'}};});var to=function to(i){return{x:0,y:i*-4,scale:1,rot:-10+Math.random()*20,delay:i*100};};var from=function from(i){return{x:0,y:i*-4,scale:.2,rot:-10+Math.random()*20,delay:i*100};};var trans=function trans(r,s){return\"perspective(1500px) rotateX(30deg) rotateY(\"+r/10+\"deg) rotateZ(\"+r+\"deg) scale(\"+s+\")\";};var Deck=function Deck(props){var startTime=props.startTime,endTime=props.endTime,type=props.type,userName=props.userName,loc=props.loc,rest=_objectWithoutProperties(props,[\"startTime\",\"endTime\",\"type\",\"userName\",\"loc\"]);var classes=useStyles();var _useState=useState(function(){return new Set();}),_useState2=_slicedToArray(_useState,1),gone=_useState2[0];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),matching=_useState4[0],setMatching=_useState4[1];var _useSprings=useSprings(matching.length,function(i){return _objectSpread(_objectSpread({},to(i)),{},{from:from(i)});}),_useSprings2=_slicedToArray(_useSprings,2),ps=_useSprings2[0],set=_useSprings2[1];var b1=useDrag(function(_ref){var _ref$args=_slicedToArray(_ref.args,1),index=_ref$args[0],down=_ref.down,_ref$movement=_slicedToArray(_ref.movement,1),mx=_ref$movement[0],distance=_ref.distance,_ref$direction=_slicedToArray(_ref.direction,1),xDir=_ref$direction[0],velocity=_ref.velocity;var trigger=velocity>0.2;var dir=xDir<0?-1:1;if(!down&&trigger)gone.add(index);if(!down&&trigger){if(dir==1){match(userName,matching[index].username,startTime,endTime,type,matching[index].name,\"YES\");}else{match(userName,matching[index].username,startTime,endTime,type,matching[index].name,\"NO\");}}set(function(i){if(index!==i)return;var isGone=gone.has(index);var x=isGone?(200+window.innerWidth)*dir:down?mx:0;var rot=mx/100+(isGone?dir*10*velocity:0);var scale=down?1.1:1;return{x:x,rot:rot,scale:scale,delay:undefined,config:{friction:50,tension:down?800:isGone?200:500}};});});function match(userName,who,startTime,endTime,type,name,decision){if(typeof window!=='undefined'){fetch('https://matchsitebackend.herokuapp.com/matched/set',{method:'PUT',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({\"account\":userName,\"who\":who,\"startTime\":startTime,\"endTime\":endTime,\"type\":type,\"decision\":decision})}).then(function(res){return res.json();}).then(function(data){if(data.success){console.log('match inserted to db');if(data.matched){alert(\"CONGRATS! you just matched with \"+name);}}else{alert('there is an error!');}});}}useEffect(function(){if(typeof window!=='undefined'){fetch('https://matchsitebackend.herokuapp.com/matching/get',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({\"account\":userName,\"startTime\":startTime,\"endTime\":endTime,\"type\":type,\"loc\":loc})}).then(function(res){return res.json();}).then(function(data){if(data.success){console.log('got info');console.log(data.data);setMatching(data.data);}else{console.log('NO ONE TO MATCH :(');setMatching([]);}});}},[type,startTime,endTime]);return React.createElement(\"div\",{className:classes.root},React.createElement(\"header\",null,React.createElement(\"meta\",{name:\"viewport\",content:\"minimum-scale=1, initial-scale=1, width=device-width\"})),React.createElement(\"div\",null,React.createElement(Grid,{container:true},ps.map(function(_ref2,i){var x=_ref2.x,y=_ref2.y,rot=_ref2.rot,scale=_ref2.scale;return React.createElement(animated.div,{className:classes.div,key:i,style:{transform:interpolate([x,y],function(x,y){return\"translate3d(\"+x+\"px,\"+y+\"px,0)\";})}},React.createElement(animated.div,_extends({},b1(i),{className:classes.innerDiv,style:{transform:interpolate([rot,scale],trans),backgroundImage:\"url(\"+(\"https://matchsiteimg.s3.ap-northeast-2.amazonaws.com/\"+matching[i].image_path)+\")\"}}),React.createElement(Grid,{container:true,justify:\"flex-end\",direction:\"column\",alignItems:\"stretch\",className:classes.container},React.createElement(Grid,{item:true,className:classes.test},React.createElement(Typography,{className:classes.boldText},matching[i].name,\",\",matching[i].age)),React.createElement(Grid,{item:true,className:classes.text},React.createElement(Typography,null,matching[i].msg)))));}))));};export default Deck;","map":{"version":3,"sources":["D:/MatchSite/src/pages/cardStack.js"],"names":["render","React","useEffect","useState","useSprings","animated","interpolate","useGesture","useDrag","makeStyles","Grid","Typography","useStyles","theme","background","overflow","root","boxSizing","position","width","height","div","willChange","display","alignItems","justifyContent","innerDiv","zIndex","backgroundColor","backgroundSize","backgroundRepeat","backgroundPosition","maxWidth","maxHeight","borderRadius","boxShadow","color","text","textShadow","boldText","fontSize","container","padding","bottom","to","i","x","y","scale","rot","Math","random","delay","from","trans","r","s","Deck","props","startTime","endTime","type","userName","loc","rest","classes","Set","gone","matching","setMatching","length","ps","set","b1","args","index","down","movement","mx","distance","direction","xDir","velocity","trigger","dir","add","match","username","name","isGone","has","window","innerWidth","undefined","config","friction","tension","who","decision","fetch","method","headers","body","JSON","stringify","then","res","json","data","success","console","log","matched","alert","map","transform","backgroundImage","image_path","test","age","msg"],"mappings":"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","sourcesContent":["import { render } from 'react-dom'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useSprings, animated, interpolate } from 'react-spring'\r\nimport { useGesture, useDrag } from 'react-use-gesture'\r\nimport { makeStyles } from '@material-ui/styles'\r\nimport { Grid, Typography } from '@material-ui/core'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  '@global': {\r\n    'body': {\r\n      background: '#E5F8FF',\r\n      overflow: 'hidden',\r\n    },\r\n  },\r\n  root: {\r\n    boxSizing: 'border-box',\r\n    position: 'fixed',\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  div: {\r\n    boxSizing: 'border-box',\r\n    position: 'absolute',\r\n    width: '100%',\r\n    height: '75vh',\r\n    willChange: 'transform',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n\r\n  innerDiv: {\r\n    zIndex: '1',  \r\n    boxSizing: 'border-box',\r\n    backgroundColor: 'white',\r\n    backgroundSize: 'auto 100%',\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundPosition: 'center center',\r\n    width: '35vh',\r\n    maxWidth: '280px',\r\n    height: '80vh',\r\n    maxHeight: '500px',\r\n    willChange: 'transform',\r\n    borderRadius: '30px',\r\n    boxShadow: '0 12.5px 100px -10px rgba(90, 90, 90, 0.4), 0 10px 10px -10px rgba(90, 90, 90, 0.3)',\r\n    color: \"white\",\r\n    display: 'flex',\r\n    backgroundSize: '35vh 75vh',\r\n  },\r\n\r\n  text: {\r\n    width: '60vw',\r\n    textShadow: '2px 2px rgba(0, 0, 0, 1)',\r\n  },\r\n\r\n  boldText: {\r\n    textShadow: '2px 2px rgba(0, 0, 0, 1)',\r\n    fontSize: '20px'\r\n  },\r\n  container: {\r\n    position: 'relative',\r\n    padding: '0 0px 15px 10px',\r\n    bottom:'0',\r\n  },\r\n}))\r\n\r\n// These two are just helpers, they curate spring data, values that are later being interpolated into css\r\nconst to = i => ({ x: 0, y: i * -4, scale: 1, rot: -10 + Math.random() * 20, delay: i * 100 })\r\nconst from = i => ({ x: 0, y: i * -4, scale: .2, rot: -10 + Math.random() * 20, delay: i * 100 })\r\n// This is being used down there in the view, it interpolates rotation and scale into a css transform\r\nconst trans = (r, s) => `perspective(1500px) rotateX(30deg) rotateY(${r / 10}deg) rotateZ(${r}deg) scale(${s})`\r\n\r\n\r\n\r\nconst Deck = (props) => {\r\n  const {startTime, endTime, type, userName, loc, ...rest} = props;\r\n  const classes = useStyles()\r\n  const [gone] = useState(() => new Set())\r\n  const [matching, setMatching] = useState([]);\r\n  const [ps, set] = useSprings(matching.length, i => ({ ...to(i), from: from(i) })) \r\n  const b1 = useDrag(({ args: [index], down, movement: [mx], distance, direction: [xDir], velocity }) => {\r\n    const trigger = velocity > 0.2 \r\n    const dir = xDir < 0 ? -1 : 1 // Direction should either point left or right\r\n    if (!down && trigger) gone.add(index)\r\n    if (!down && trigger) {\r\n      if (dir == 1) {\r\n        match(userName, matching[index].username, startTime, endTime, type, matching[index].name, \"YES\");\r\n      } else {\r\n        match(userName, matching[index].username, startTime, endTime, type, matching[index].name, \"NO\");\r\n      }\r\n    }\r\n    set(i => {\r\n      if (index !== i) return \r\n      const isGone = gone.has(index)\r\n      const x = isGone ? (200 + window.innerWidth) * dir : down ? mx : 0 // When a card is gone it flys out left or right, otherwise goes back to zero\r\n      const rot = mx / 100 + (isGone ? dir * 10 * velocity : 0) // How much the card tilts, flicking it harder makes it rotate faster\r\n      const scale = down ? 1.1 : 1 // Active cards lift up a bit\r\n      return { x, rot, scale, delay: undefined, config: { friction: 50, tension: down ? 800 : isGone ? 200 : 500 } }\r\n    })\r\n    \r\n  })\r\n\r\n  function match(userName, who, startTime, endTime, type, name, decision) {\r\n    if (typeof window !== 'undefined') {\r\n      fetch('https://matchsitebackend.herokuapp.com/matched/set', {\r\n                  method: 'PUT',\r\n                  headers: {\r\n                      'Accept': 'application/json',\r\n                      'Content-Type': 'application/json'\r\n                  },\r\n                  body: JSON.stringify({\r\n                      \"account\": userName,\r\n                      \"who\": who,\r\n                      \"startTime\": startTime,\r\n                      \"endTime\": endTime,\r\n                      \"type\": type,\r\n                      \"decision\": decision,\r\n                  })\r\n                  })\r\n                  .then(res => res.json())\r\n                  .then(data => {\r\n                      if (data.success) {\r\n                        console.log('match inserted to db');\r\n                        if (data.matched) {\r\n                          alert(\"CONGRATS! you just matched with \" + name)\r\n                        }\r\n                      } else {\r\n                          alert('there is an error!');\r\n                      }\r\n                      })\r\n    }\r\n  }\r\n  \r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      fetch('https://matchsitebackend.herokuapp.com/matching/get', {\r\n          method: 'POST',\r\n          headers: {\r\n              'Accept': 'application/json',\r\n              'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n              \"account\": userName,\r\n              \"startTime\": startTime,\r\n              \"endTime\": endTime,\r\n              \"type\": type,\r\n              \"loc\": loc,\r\n          })\r\n          })\r\n          .then(res => res.json())\r\n          .then(data => {\r\n              if (data.success) {\r\n              console.log('got info');\r\n              console.log(data.data);\r\n              setMatching(data.data);\r\n              } else {\r\n                console.log('NO ONE TO MATCH :(')\r\n                setMatching([]);\r\n              }\r\n              })\r\n      }}, [type, startTime, endTime]);\r\n  \r\n  return (\r\n    <div className={classes.root}>\r\n      <header>\r\n      <meta\r\n      name=\"viewport\"\r\n      content=\"minimum-scale=1, initial-scale=1, width=device-width\"\r\n      />\r\n      </header>\r\n    <div>\r\n    <Grid container>  \r\n    {ps.map(({ x, y, rot, scale }, i) => (\r\n    <animated.div className={classes.div} key={i} style={{ transform: interpolate([x, y], (x, y) => `translate3d(${x}px,${y}px,0)`) }}>\r\n      <animated.div {...b1(i)}\r\n        className={classes.innerDiv}\r\n        style={{ transform: interpolate([rot, scale], trans), backgroundImage: `url(${\"https://matchsiteimg.s3.ap-northeast-2.amazonaws.com/\"+matching[i].image_path})` }}>\r\n        <Grid container justify=\"flex-end\" direction=\"column\" alignItems=\"stretch\" className={classes.container}>\r\n        <Grid item className={classes.test}>\r\n      <Typography className={classes.boldText}>{matching[i].name},{matching[i].age}</Typography>\r\n        </Grid>\r\n        <Grid item className={classes.text}>\r\n          <Typography>{matching[i].msg}</Typography>\r\n        </Grid>\r\n      </Grid>\r\n      </animated.div>\r\n    </animated.div>))}\r\n    </Grid>\r\n    </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Deck;"]},"metadata":{},"sourceType":"module"}