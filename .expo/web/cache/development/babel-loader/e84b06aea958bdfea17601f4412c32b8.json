{"ast":null,"code":"var _jsxFileName = \"D:\\\\MatchSite\\\\src\\\\pages\\\\ChatPage\\\\chatRoom.js\";\nimport React from 'react';\nimport { GiftedChat } from 'react-web-gifted-chat';\nimport socketIOClient from \"socket.io-client\";\nvar ENDPOINT = \"http://localhost:3000/\";\nvar APILINK = 'https://matchsitebackend.herokuapp.com/msg/get';\n\nvar ChatRoom = function ChatRoom(location) {\n  var _location$state = location.state,\n      user = _location$state.user,\n      to = _location$state.to,\n      userIcon = _location$state.userIcon,\n      toIcon = _location$state.toIcon;\n\n  var _React$useState = React.useState([]),\n      msgs = _React$useState.msgs,\n      setMsgs = _React$useState.setMsgs;\n\n  var addMessage = function addMessage(msg) {\n    var newMsg = msgs.push([]);\n    setMsgs(newMsg);\n  };\n\n  var onSend = function onSend(msg) {\n    if (typeof window !== 'undefined') {\n      fetch('http://localhost:3000/msg/get', {\n        method: 'PUT',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"account\": user,\n          \"to\": to,\n          \"msg\": msg\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        if (data.success) {\n          console.log(data.data);\n        } else {\n          console.log('ERROR');\n        }\n      });\n    }\n  };\n\n  React.useEffect(function () {\n    var socket = socketIOClient(ENDPOINT);\n    socket.emit('join', user);\n    socket.on('message', function (msg) {\n      return addMessage(msg);\n    });\n\n    if (typeof window !== 'undefined') {\n      fetch('http://localhost:3000/msg/get', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"account\": user,\n          \"to\": to\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        if (data.success) {\n          console.log(data.data);\n        } else {\n          console.log('ERROR');\n        }\n      });\n      return function () {\n        return socket.disconnect();\n      };\n    }\n  }, []);\n  return React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, \"testing\");\n};\n\nexport default ChatRoom;","map":{"version":3,"sources":["D:/MatchSite/src/pages/ChatPage/chatRoom.js"],"names":["React","GiftedChat","socketIOClient","ENDPOINT","APILINK","ChatRoom","location","state","user","to","userIcon","toIcon","useState","msgs","setMsgs","addMessage","msg","newMsg","push","onSend","window","fetch","method","headers","body","JSON","stringify","then","res","json","data","success","console","log","useEffect","socket","emit","on","disconnect"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { GiftedChat } from 'react-web-gifted-chat';\r\nimport socketIOClient from \"socket.io-client\";\r\n\r\nconst ENDPOINT = \"http://localhost:3000/\"\r\nconst APILINK = 'https://matchsitebackend.herokuapp.com/msg/get';\r\n\r\nconst ChatRoom = (location) => {\r\n    const {user, to, userIcon, toIcon} = location.state;\r\n    const {msgs, setMsgs} = React.useState([]);\r\n\r\n    const addMessage = (msg) => {\r\n        const newMsg = msgs.push([]);\r\n        setMsgs(newMsg);\r\n    }\r\n\r\n    const onSend = (msg) => {\r\n        if (typeof window !== 'undefined') {\r\n            fetch('http://localhost:3000/msg/get', {\r\n                method: 'PUT',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    \"account\": user,\r\n                    \"to\": to,\r\n                    \"msg\": msg,\r\n                })\r\n                })\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    if (data.success) {\r\n                    console.log(data.data);\r\n                    } else {\r\n                      console.log('ERROR')\r\n                    }\r\n                })\r\n        }\r\n    }\r\n    \r\n    React.useEffect(() => {\r\n        const socket = socketIOClient(ENDPOINT);\r\n        socket.emit('join', user);\r\n        socket.on('message', msg => addMessage(msg));\r\n        if (typeof window !== 'undefined') {\r\n            fetch('http://localhost:3000/msg/get', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    \"account\": user,\r\n                    \"to\": to,\r\n                })\r\n                })\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    if (data.success) {\r\n                    console.log(data.data);\r\n                    } else {\r\n                      console.log('ERROR')\r\n                    }\r\n                })\r\n        return () => socket.disconnect();\r\n        }\r\n    }, [])\r\n\r\n    return (<h1>testing</h1>)\r\n\r\n\r\n}\r\n\r\nexport default ChatRoom;"]},"metadata":{},"sourceType":"module"}